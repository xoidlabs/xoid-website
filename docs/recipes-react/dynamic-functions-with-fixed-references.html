<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="xoid Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="xoid Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="xoid" href="/opensearch.xml"><title data-react-helmet="true">Dynamic functions with fixed references Â· xoid</title><meta data-react-helmet="true" property="twitter:image" content="https://xoid.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for xoid"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:image" content="https://xoid.dev/img/logo.png"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://xoid.dev/img/logo.png"><meta data-react-helmet="true" property="og:title" content="Dynamic functions with fixed references Â· xoid"><meta data-react-helmet="true" name="description" content="Inside a React function component, in some cases a function with a fixed reference, but a dynamic content may be needed. While this is not as straightforward with React, it is with *xoid**."><meta data-react-helmet="true" property="og:description" content="Inside a React function component, in some cases a function with a fixed reference, but a dynamic content may be needed. While this is not as straightforward with React, it is with *xoid**."><meta data-react-helmet="true" property="og:url" content="https://xoid.dev/docs/recipes-react/dynamic-functions-with-fixed-references"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://PU1TKKPFLJ-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://xoid.dev/docs/recipes-react/dynamic-functions-with-fixed-references"><link rel="stylesheet" href="/styles.f271ebe8.css">
<link rel="stylesheet" href="/main.1558ef33.css">
<link rel="preload" href="/styles.d43133a8.js" as="script">
<link rel="preload" href="/runtime~main.5dd47b2f.js" as="script">
<link rel="preload" href="/main.5272439c.js" as="script">
<link rel="preload" href="/1.e9e96aca.js" as="script">
<link rel="preload" href="/2.b9cab5e0.js" as="script">
<link rel="preload" href="/6275fe66.43f62879.js" as="script">
<link rel="preload" href="/33.3fb5e810.js" as="script">
<link rel="preload" href="/935f2afb.e9054b83.js" as="script">
<link rel="preload" href="/17896441.b8fead94.js" as="script">
<link rel="preload" href="/7668cb98.2cab41a2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo-navbar.svg" alt="xoid"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/examples">Examples</a><a href="https://github.com/xoidlabs/xoid" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo-navbar.svg" alt="xoid"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/examples">Examples</a></li><li class="menu__list-item"><a href="https://github.com/xoidlabs/xoid" target="_blank" rel="noopener noreferrer" class="menu__link navbar-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick-tutorial">Quick Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/performance-optimizations">Performance optimizations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/streams">Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced-concepts">Advanced concepts</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Framework Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework-integrations/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework-integrations/use-atom">useAtom</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework-integrations/use-setup">useSetup</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Recipes (React)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-react/using-context-correctly">Using context correctly</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-react/creating-react-custom-hooks">Creating React custom hooks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/recipes-react/dynamic-functions-with-fixed-references">Dynamic functions with fixed references</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-react/refactoring-react-classes">Refactoring React classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-react/grabbing-refs">Grabbing refs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Recipes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/nested-state">Working with nested state</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/using-immer">Using immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/using-reducers">Using reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/redux-interop">Using in an existing Redux App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/redux-devtools-integration">Redux Devtools integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/finite-state-machines">Finite state machines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes/persist-localstorage">Persisting data with localStorage</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Dynamic functions with fixed references</h1></header><div class="markdown"><p>Inside a React function component, in some cases <strong>a function with a fixed reference, but a dynamic content</strong> may be needed. While this is not as straightforward with React*, it is with <strong>xoid</strong>.</p><blockquote><p>*: Since this recipe was written, <code>useEvent</code> &quot;the missing hook&quot; has been added to React to solve the same problem. However ergonomicity claims of <strong>xoid</strong> still hold.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="quick-example"></a>Quick Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#quick-example" title="Direct link to heading">#</a></h3><p>Let&#x27;s imagine, we have the following <code>React.useEffect</code>. Inside it, an event listener is attached and removed everytime when <code>props.number</code> changes.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#FFFFFF;background:transparent"><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token function" style="color:#79b6f2">useEffect</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">callback</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">addEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#b390d1">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">removeEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span></div></div></div></div></div><p>Let&#x27;s assume that, due to changed app requirements, we want to attach the listener only once, and remove it once the component is unmounted. This can be achieved in React way as the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#FFFFFF;background:transparent"><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token comment" style="color:#939ca1d1">// a ref to keep the value</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> numberRef </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">useRef</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token comment" style="color:#939ca1d1">// an effect to update ref&#x27;s current value when the `props.number` is changed</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token function" style="color:#79b6f2">useEffect</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">numberRef</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token comment" style="color:#939ca1d1">// This time useEffect is with an empty dependency array, and it references the ref.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token function" style="color:#79b6f2">useEffect</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">callback</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">numberRef</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">addEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#b390d1">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">removeEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span></div></div></div></div></div><p>With <strong>xoid</strong>, the equivalent optimization is simply the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#FFFFFF;background:transparent"><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token function" style="color:#79b6f2">useSetup</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">$props</span><span class="token parameter punctuation" style="color:#657b83">,</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#657b83">{</span><span class="token parameter"> effect </span><span class="token parameter punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">effect</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">    </span><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">callback</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">$props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">number</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">    </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">addEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#b390d1">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(252, 146, 158)">window</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">removeEventListener</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;click&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#657b83">)</span></div></div></div></div></div><p>After getting used to, <strong>xoid</strong> can feel more intuitive than React hooks in a lot of cases.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="another-example"></a>Another Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#another-example" title="Direct link to heading">#</a></h3><p>Let&#x27;s propose another problem, this time let&#x27;s examine it in a more concrete scenario.</p><p>Let&#x27;s imagine, inside a React component, we&#x27;re supposed to initialize a class called <code>DragDropLibrary</code> <strong>only once</strong> as <code>new DragDropLibrary({ onDrop })</code>. Let&#x27;s assume we have only one chance to supply <code>onDrop</code> to the class instance, and this function cannot be replaced afterwards.</p><p>Imagine that <code>props.func</code> is our dynamic function that changes in every render, and we&#x27;re supposed to feed it to <code>onDrop</code>.</p><p>With <strong>xoid</strong>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#FFFFFF;background:transparent"><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token function" style="color:#79b6f2">useSetup</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">$props</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">onDrop</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter spread operator" style="color:#fc929e">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> $props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">func</span><span class="token punctuation" style="color:#657b83">(</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword" style="color:#b390d1">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">DragDropLibrary</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> onDrop </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#657b83">)</span></div></div></div></div></div><blockquote><p>Think of <code>useSetup</code> as not a hook, but as something unchanging, some closure that does not ever rerender. <strong>@xoid/react</strong>, in some sense, is a React without hooks.</p></blockquote><p>Without <strong>xoid</strong>: </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#FFFFFF;background:transparent"><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token keyword" style="color:#b390d1">const</span><span class="token plain"> funcRef </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">useRef</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter spread operator" style="color:#fc929e">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">func</span><span class="token punctuation" style="color:#657b83">(</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token function" style="color:#79b6f2">useEffect</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> funcRef</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method-variable function-variable method function property-access" style="color:#79b6f2">current</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter spread operator" style="color:#fc929e">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token method function property-access" style="color:#79b6f2">func</span><span class="token punctuation" style="color:#657b83">(</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">func</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token function" style="color:#79b6f2">useMemo</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain">  </span><span class="token keyword" style="color:#b390d1">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">DragDropLibrary</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#2aa198">onDrop</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> funcRef</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:transparent"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/xoidlabs/xoid/blob/main/docs/recipes-react/dynamic-functions-with-fixed-references.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/recipes-react/creating-react-custom-hooks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Creating React custom hooks</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/recipes-react/refactoring-react-classes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Refactoring React classes Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-example" class="table-of-contents__link">Quick Example</a></li><li><a href="#another-example" class="table-of-contents__link">Another Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/recipes-react/using-context-correctly">Recipes</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/examples">Examples</a></li><li class="footer__item"><a href="https://github.com/xoidlabs/xoid" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://opencollective.com/xoid" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenCollective</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2024 Docusaurus. Thanks to <a href="http://a-maslennikov.com/">Anatoly</a> for the <a href="https://www.flaticon.com/free-icon/ruler_245975">icon</a>.
      </div></div></div></footer></div>
<script src="/styles.d43133a8.js"></script>
<script src="/runtime~main.5dd47b2f.js"></script>
<script src="/main.5272439c.js"></script>
<script src="/1.e9e96aca.js"></script>
<script src="/2.b9cab5e0.js"></script>
<script src="/6275fe66.43f62879.js"></script>
<script src="/33.3fb5e810.js"></script>
<script src="/935f2afb.e9054b83.js"></script>
<script src="/17896441.b8fead94.js"></script>
<script src="/7668cb98.2cab41a2.js"></script>
</body>
</html>